<!-- Composant : Section IA du formulaire avec cases √† cocher -->
<details class="bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-4">
  <summary class="cursor-pointer font-medium text-purple-800 hover:text-purple-900 flex items-center gap-2">
    ‚ú® Extraire des donn√©es structur√©es avec l'IA ‚ú®
    <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-normal">Powered by LangExtract</span>
  </summary>
  
  <div class="mt-4 space-y-4">
    <!-- Instructions -->
    <div class="bg-white border border-purple-200 rounded p-3">
      <h4 class="font-medium text-purple-800 mb-2">üéØ S√©lectionnez les informations √† extraire</h4>
      <p class="text-sm text-purple-600">Cochez les cases correspondant aux donn√©es que vous souhaitez r√©cup√©rer du PDF.</p>
    </div>
    
    <!-- Grille des options -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Noms/Pr√©noms -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="nom" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üë§ Noms</div>
          <div class="text-xs text-purple-600">Noms, pr√©noms, identit√©s</div>
        </div>
      </label>
      
      <!-- Civilit√©s -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="civilit√©" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üé© Civilit√©</div>
          <div class="text-xs text-purple-600">MR, MME, MR ET MME</div>
        </div>
      </label>
      
      <!-- Codes -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="code" class="mt-1 h-4 w-4 text-purple-600" id="code-checkbox">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üè∑Ô∏è Codes</div>
          <div class="text-xs text-purple-600">Codes de r√©f√©rence, identifiants</div>
        </div>
      </label>
      
      <!-- Email -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="email" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üìß Email</div>
          <div class="text-xs text-purple-600">Adresses √©lectroniques</div>
        </div>
      </label>
      
      <!-- T√©l√©phone -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="t√©l√©phone" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üìû T√©l√©phone</div>
          <div class="text-xs text-purple-600">Num√©ros de t√©l√©phone</div>
        </div>
      </label>
      
      <!-- Dates -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="date" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üìÖ Dates</div>
          <div class="text-xs text-purple-600">Dates, √©ch√©ances</div>
        </div>
      </label>
      
      <!-- Montants -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="montant" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üí∞ Montants</div>
          <div class="text-xs text-purple-600">Prix, sommes, valeurs</div>
        </div>
      </label>
      
      <!-- Adresses -->
      <label class="flex items-start gap-3 bg-white border-2 border-purple-200 rounded-lg p-3 hover:border-purple-300 cursor-pointer transition-colors">
        <input type="checkbox" name="extraction_keywords" value="adresse" class="mt-1 h-4 w-4 text-purple-600">
        <div class="flex-1">
          <div class="font-medium text-purple-800">üè† Adresses</div>
          <div class="text-xs text-purple-600">Adresses postales</div>
        </div>
      </label>
    </div>
    
    <!-- Options sp√©ciales pour les codes -->
    <div id="code-options" class="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 hidden">
      <h5 class="font-medium text-yellow-800 mb-3">‚öôÔ∏è Configuration des codes</h5>
      <div class="grid md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-yellow-700 mb-1">Longueur du code recherch√©</label>
          <input class="w-full border-2 border-yellow-300 rounded-lg p-2 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100" 
                 type="number" 
                 name="search_code_length" 
                 min="1" 
                 max="20" 
                 value="5"
                 placeholder="ex: 5 pour XNBAI">
          <p class="text-xs text-yellow-600 mt-1">Longueur attendue du code complet dans le PDF</p>
        </div>
        <div>
          <label class="block text-sm font-medium text-yellow-700 mb-1">Longueur du code √† extraire</label>
          <input class="w-full border-2 border-yellow-300 rounded-lg p-2 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100" 
                 type="number" 
                 name="result_code_length" 
                 min="1" 
                 max="20" 
                 value="4"
                 placeholder="ex: 4 pour XNBA">
          <p class="text-xs text-yellow-600 mt-1">Nombre de caract√®res √† extraire du d√©but du code</p>
        </div>
      </div>
      <div class="mt-3 bg-yellow-100 border border-yellow-300 rounded p-2">
        <p class="text-xs text-yellow-700">
          <strong>Exemple :</strong> Si votre PDF contient "XNBAI2024" et que vous configurez 5‚Üí4, 
          l'IA recherchera des codes de 5 caract√®res et extraira les 4 premiers : "XNBA"
        </p>
      </div>
    </div>
    
    <!-- Comment √ßa marche -->
    <div class="bg-purple-100 border border-purple-300 rounded p-3">
      <h5 class="font-medium text-purple-800 mb-2">üîß Comment √ßa marche</h5>
      <ol class="text-sm text-purple-700 space-y-1 list-decimal list-inside">
        <li>S√©lectionnez les types de donn√©es √† extraire</li>
        <li>L'IA analyse intelligemment le contenu du PDF</li>
        <li>Elle extrait uniquement les donn√©es s√©lectionn√©es</li>
        <li>Les r√©sultats sont affich√©s dans un tableau organis√©</li>
        <li>Chaque extraction indique sa position dans le document</li>
      </ol>
    </div>
  </div>
</details>

<script>
// Afficher/masquer les options de code
document.addEventListener('DOMContentLoaded', function() {
  const codeCheckbox = document.getElementById('code-checkbox');
  const codeOptions = document.getElementById('code-options');
  
  if (codeCheckbox && codeOptions) {
    function toggleCodeOptions() {
      if (codeCheckbox.checked) {
        codeOptions.classList.remove('hidden');
      } else {
        codeOptions.classList.add('hidden');
      }
    }
    
    codeCheckbox.addEventListener('change', toggleCodeOptions);
    toggleCodeOptions(); // Initial state
  }
});
</script>
